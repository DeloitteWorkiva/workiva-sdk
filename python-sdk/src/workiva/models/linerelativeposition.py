"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .designpagerelative import DesignPageRelative, DesignPageRelativeTypedDict
from .linerelativetype import LineRelativeType
from .paragraphrelative import ParagraphRelative, ParagraphRelativeTypedDict
from .sliderelative import SlideRelative, SlideRelativeTypedDict
import pydantic
from pydantic import field_serializer, model_serializer
from typing_extensions import Annotated, NotRequired, TypedDict
from workiva import models
from workiva.types import BaseModel, Nullable, OptionalNullable, UNSET, UNSET_SENTINEL


class LineRelativePositionTypedDict(TypedDict):
    r"""The relative position for the head and tail of a line drawing element."""

    type: LineRelativeType
    r"""The relative position type used for the head and tail of a line drawing element."""
    design_page_relative: NotRequired[Nullable[DesignPageRelativeTypedDict]]
    r"""Represents the position of a drawing relative to the top-left corner of the section."""
    paragraph_relative: NotRequired[Nullable[ParagraphRelativeTypedDict]]
    r"""Represents a position relative to the start of the paragraph corresponding to the paragraph index."""
    slide_relative: NotRequired[Nullable[SlideRelativeTypedDict]]
    r"""Represents the position of a drawing relative to the top-left corner a slide."""


class LineRelativePosition(BaseModel):
    r"""The relative position for the head and tail of a line drawing element."""

    type: LineRelativeType
    r"""The relative position type used for the head and tail of a line drawing element."""

    design_page_relative: Annotated[
        OptionalNullable[DesignPageRelative], pydantic.Field(alias="designPageRelative")
    ] = UNSET
    r"""Represents the position of a drawing relative to the top-left corner of the section."""

    paragraph_relative: Annotated[
        OptionalNullable[ParagraphRelative], pydantic.Field(alias="paragraphRelative")
    ] = UNSET
    r"""Represents a position relative to the start of the paragraph corresponding to the paragraph index."""

    slide_relative: Annotated[
        OptionalNullable[SlideRelative], pydantic.Field(alias="slideRelative")
    ] = UNSET
    r"""Represents the position of a drawing relative to the top-left corner a slide."""

    @field_serializer("type")
    def serialize_type(self, value):
        if isinstance(value, str):
            try:
                return models.LineRelativeType(value)
            except ValueError:
                return value
        return value

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            ["designPageRelative", "paragraphRelative", "slideRelative"]
        )
        nullable_fields = set(
            ["designPageRelative", "paragraphRelative", "slideRelative"]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)
            is_nullable_and_explicitly_set = (
                k in nullable_fields
                and (self.__pydantic_fields_set__.intersection({n}))  # pylint: disable=no-member
            )

            if val != UNSET_SENTINEL:
                if (
                    val is not None
                    or k not in optional_fields
                    or is_nullable_and_explicitly_set
                ):
                    m[k] = val

        return m
