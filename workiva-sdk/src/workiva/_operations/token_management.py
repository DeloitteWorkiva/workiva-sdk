"""Wdata API — token_management namespace.

Auto-generated by codegen. Do not edit manually.
"""

from __future__ import annotations

from typing import Any, Optional

import httpx

from workiva._constants import _API
from workiva._operations._base import BaseNamespace


class TokenManagement(BaseNamespace):
    """TokenManagement operations."""

    _api: _API = _API.WDATA

    def create_token(
        self,
        *,
        body: TokenDto,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Create a new token

        Creates a temporary token—valid for only a short period of time—to
        download a table
        dataset file or query result, given its ID.
        """
        return self._client.request(
            "POST",
            self._api,
            "/api/v1/token",
            json_body=body,
            timeout=timeout,
        )

    async def create_token_async(
        self,
        *,
        body: TokenDto,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Create a new token (async)

        Creates a temporary token—valid for only a short period of time—to
        download a table
        dataset file or query result, given its ID.
        """
        return await self._client.request_async(
            "POST",
            self._api,
            "/api/v1/token",
            json_body=body,
            timeout=timeout,
        )

    def download_file(
        self,
        *,
        token_id: str,
        filename: Optional[str] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Download a single file

        Downloads a table dataset or query result as a file, given its token
        from the [`Create a new token endpoint`](ref:wdata-createtoken). If no
        matching entity is found, returns a 404.
        """
        return self._client.request(
            "GET",
            self._api,
            "/api/v1/token/{tokenId}",
            path_params={
                "tokenId": token_id,
            },
            query_params={
                "filename": filename,
            },
            timeout=timeout,
        )

    async def download_file_async(
        self,
        *,
        token_id: str,
        filename: Optional[str] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Download a single file (async)

        Downloads a table dataset or query result as a file, given its token
        from the [`Create a new token endpoint`](ref:wdata-createtoken). If no
        matching entity is found, returns a 404.
        """
        return await self._client.request_async(
            "GET",
            self._api,
            "/api/v1/token/{tokenId}",
            path_params={
                "tokenId": token_id,
            },
            query_params={
                "filename": filename,
            },
            timeout=timeout,
        )
