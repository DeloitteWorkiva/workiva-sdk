"""Wdata API â€” administrative_tasks namespace.

Auto-generated by codegen. Do not edit manually.
"""

from __future__ import annotations

from typing import Any, Optional

import httpx

from workiva._constants import _API
from workiva._operations._base import BaseNamespace
from workiva.models.wdata import (
    StartValidateFilesDto,
)


class AdministrativeTasks(BaseNamespace):
    """AdministrativeTasks operations."""

    _api: _API = _API.WDATA

    def delete_workspace(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Delete a single workspace

        Deletes all information in the workspace of the request. <b>This is a
        final operation and can't be undone</b>. Any state left in the workspace
        due to an error is in an indeterminate state and shouldn't be trusted.
        Some non-private information may be kept for auditing and metric
        purposes.
        """
        return self._client.request(
            "DELETE",
            self._api,
            "/api/v1/admin/account",
            timeout=timeout,
        )

    async def delete_workspace_async(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Delete a single workspace (async)

        Deletes all information in the workspace of the request. <b>This is a
        final operation and can't be undone</b>. Any state left in the workspace
        due to an error is in an indeterminate state and shouldn't be trusted.
        Some non-private information may be kept for auditing and metric
        purposes.
        """
        return await self._client.request_async(
            "DELETE",
            self._api,
            "/api/v1/admin/account",
            timeout=timeout,
        )

    def export_workspace(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Export a single workspace

        Creates a file representing the entirety of the requested workspace and
        returns a
        token. Use the [`Download a single file endpoint`](ref:wdata-
        downloadfile) to
        exchange the token for the file.
        """
        return self._client.request(
            "GET",
            self._api,
            "/api/v1/admin/export",
            timeout=timeout,
        )

    async def export_workspace_async(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Export a single workspace (async)

        Creates a file representing the entirety of the requested workspace and
        returns a
        token. Use the [`Download a single file endpoint`](ref:wdata-
        downloadfile) to
        exchange the token for the file.
        """
        return await self._client.request_async(
            "GET",
            self._api,
            "/api/v1/admin/export",
            timeout=timeout,
        )

    def import_data(
        self,
        *,
        wipe: Optional[bool] = True,
        body: Optional[dict[str, Any]] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Import data

        By default, deletes all information in the workspace of the request.
        <b>This is a final
        operation and can't be undone.</b>  Any state left in the workspace due
        to an error is
        in an indeterminate state and shouldn't be trusted. Some non-private
        information may be
        kept for auditing and metric purposes. After the delete, it then imports
        the tables, tags,
        and queries in the provided cb file into the workspace. <br><br>
        This is an asynchronous operation. Returns a 201 when the file is
        correctly decoded and
        its tables, queries, and tags are saved. Files continue to import after
        this call
        completes.
        """
        return self._client.request(
            "POST",
            self._api,
            "/api/v1/admin/import",
            query_params={
                "wipe": wipe,
            },
            files=body,
            timeout=timeout,
        )

    async def import_data_async(
        self,
        *,
        wipe: Optional[bool] = True,
        body: Optional[dict[str, Any]] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Import data (async)

        By default, deletes all information in the workspace of the request.
        <b>This is a final
        operation and can't be undone.</b>  Any state left in the workspace due
        to an error is
        in an indeterminate state and shouldn't be trusted. Some non-private
        information may be
        kept for auditing and metric purposes. After the delete, it then imports
        the tables, tags,
        and queries in the provided cb file into the workspace. <br><br>
        This is an asynchronous operation. Returns a 201 when the file is
        correctly decoded and
        its tables, queries, and tags are saved. Files continue to import after
        this call
        completes.
        """
        return await self._client.request_async(
            "POST",
            self._api,
            "/api/v1/admin/import",
            query_params={
                "wipe": wipe,
            },
            files=body,
            timeout=timeout,
        )

    def find_workspace_files_by_size(
        self,
        *,
        cursor: Optional[str] = None,
        limit: Optional[int] = None,
        offset: Optional[int] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace files by size

        Returns a paged collection of the file meta associated with the
        workspace of the request,
        ordered by size.
        """
        return self._client.request(
            "GET",
            self._api,
            "/api/v1/admin/usage/filesBySize",
            query_params={
                "cursor": cursor,
                "limit": limit,
                "offset": offset,
            },
            timeout=timeout,
        )

    async def find_workspace_files_by_size_async(
        self,
        *,
        cursor: Optional[str] = None,
        limit: Optional[int] = None,
        offset: Optional[int] = None,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace files by size (async)

        Returns a paged collection of the file meta associated with the
        workspace of the request,
        ordered by size.
        """
        return await self._client.request_async(
            "GET",
            self._api,
            "/api/v1/admin/usage/filesBySize",
            query_params={
                "cursor": cursor,
                "limit": limit,
                "offset": offset,
            },
            timeout=timeout,
        )

    def get_workspace_query_usage(
        self,
        *,
        start_date: Optional[str] = "1970-01-01",
        stop_date: Optional[str] = "9999-01-01",
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace query usage

        Returns a Long that represents the number of bytes queried by the
        workspace of the
        request since the start time provided.
        """
        return self._client.request(
            "GET",
            self._api,
            "/api/v1/admin/usage/query",
            query_params={
                "startDate": start_date,
                "stopDate": stop_date,
            },
            timeout=timeout,
        )

    async def get_workspace_query_usage_async(
        self,
        *,
        start_date: Optional[str] = "1970-01-01",
        stop_date: Optional[str] = "9999-01-01",
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace query usage (async)

        Returns a Long that represents the number of bytes queried by the
        workspace of the
        request since the start time provided.
        """
        return await self._client.request_async(
            "GET",
            self._api,
            "/api/v1/admin/usage/query",
            query_params={
                "startDate": start_date,
                "stopDate": stop_date,
            },
            timeout=timeout,
        )

    def get_workspace_upload_usage(
        self,
        *,
        start_date: Optional[str] = "1970-01-01",
        stop_date: Optional[str] = "9999-01-01",
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace upload usage

        Returns a Long that represents the number of bytes uploaded by the
        workspace associated with this request from the start time provided to
        now.
        """
        return self._client.request(
            "GET",
            self._api,
            "/api/v1/admin/usage/upload",
            query_params={
                "startDate": start_date,
                "stopDate": stop_date,
            },
            timeout=timeout,
        )

    async def get_workspace_upload_usage_async(
        self,
        *,
        start_date: Optional[str] = "1970-01-01",
        stop_date: Optional[str] = "9999-01-01",
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Retrieve workspace upload usage (async)

        Returns a Long that represents the number of bytes uploaded by the
        workspace associated with this request from the start time provided to
        now.
        """
        return await self._client.request_async(
            "GET",
            self._api,
            "/api/v1/admin/usage/upload",
            query_params={
                "startDate": start_date,
                "stopDate": stop_date,
            },
            timeout=timeout,
        )

    def validate_files(
        self,
        *,
        body: StartValidateFilesDto,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Validate files

        Validates files associated with the provided table ID. Validation
        repairs any files in
        an inconsistent state, and deletes those without enough state to
        recover. All files
        deleted or repaired are returned.
        """
        return self._client.request(
            "POST",
            self._api,
            "/api/v1/admin/validation/files",
            json_body=body,
            timeout=timeout,
        )

    async def validate_files_async(
        self,
        *,
        body: StartValidateFilesDto,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Validate files (async)

        Validates files associated with the provided table ID. Validation
        repairs any files in
        an inconsistent state, and deletes those without enough state to
        recover. All files
        deleted or repaired are returned.
        """
        return await self._client.request_async(
            "POST",
            self._api,
            "/api/v1/admin/validation/files",
            json_body=body,
            timeout=timeout,
        )

    def validate_tables(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Validate tables

        Validates the tables in the workspace associated with the request.
        Validation returns an entity that indicates the tables deleted due to
        bad state, and those with enough state and repaired.
        """
        return self._client.request(
            "POST",
            self._api,
            "/api/v1/admin/validation/tables",
            timeout=timeout,
        )

    async def validate_tables_async(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Validate tables (async)

        Validates the tables in the workspace associated with the request.
        Validation returns an entity that indicates the tables deleted due to
        bad state, and those with enough state and repaired.
        """
        return await self._client.request_async(
            "POST",
            self._api,
            "/api/v1/admin/validation/tables",
            timeout=timeout,
        )
