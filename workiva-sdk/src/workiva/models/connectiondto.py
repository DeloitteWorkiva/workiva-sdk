"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .connectionrundto import ConnectionRunDto, ConnectionRunDtoTypedDict
from datetime import datetime
from enum import Enum
import pydantic
from pydantic import field_serializer, model_serializer
from typing import Any, Dict, Optional
from typing_extensions import Annotated, NotRequired, TypedDict
from workiva import models, utils
from workiva.types import BaseModel, UNSET_SENTINEL


class DestinationType(str, Enum, metaclass=utils.OpenEnumMeta):
    r"""The type of file or item the connection sends data to"""

    SPREADSHEET = "spreadsheet"
    SPREADSHEET_SECTION = "spreadsheet_section"
    PRESENTATION = "presentation"
    PRESENTATION_CHART = "presentation_chart"
    PRESENTATION_EMBEDDED_TABLE = "presentation_embedded_table"
    DOCUMENT = "document"
    DOCUMENT_CHART = "document_chart"
    DOCUMENT_EMBEDDED_TABLE = "document_embedded_table"
    WDATA_QUERY = "wdata_query"
    WDATA_SHARED_QUERY = "wdata_shared_query"
    WDATA_TABLE = "wdata_table"
    WDATA_TABLE_DATASET = "wdata_table_dataset"
    REPORT = "report"
    ESG_PROGRAM = "esg_program"
    UNKNOWN_RECORD_TYPE = "unknown_record_type"


class SourceType(str, Enum, metaclass=utils.OpenEnumMeta):
    r"""The type of file or item the connection pulls data from"""

    SPREADSHEET = "spreadsheet"
    SPREADSHEET_SECTION = "spreadsheet_section"
    PRESENTATION = "presentation"
    PRESENTATION_CHART = "presentation_chart"
    PRESENTATION_EMBEDDED_TABLE = "presentation_embedded_table"
    DOCUMENT = "document"
    DOCUMENT_CHART = "document_chart"
    DOCUMENT_EMBEDDED_TABLE = "document_embedded_table"
    WDATA_QUERY = "wdata_query"
    WDATA_SHARED_QUERY = "wdata_shared_query"
    WDATA_TABLE = "wdata_table"
    WDATA_TABLE_DATASET = "wdata_table_dataset"
    REPORT = "report"
    ESG_PROGRAM = "esg_program"
    UNKNOWN_RECORD_TYPE = "unknown_record_type"


class ConnectionDtoTypedDict(TypedDict):
    connection_id: NotRequired[str]
    r"""The unique ID of the connection"""
    created: NotRequired[datetime]
    r"""When the connection was created, as a datetime"""
    created_by: NotRequired[str]
    r"""The ID of the user that created the connection"""
    description: NotRequired[str]
    r"""The description of the connection, if specified"""
    destination_id: NotRequired[str]
    r"""The ID of the file or item the connection sends data to"""
    destination_type: NotRequired[DestinationType]
    r"""The type of file or item the connection sends data to"""
    destination_workspace_id: NotRequired[str]
    r"""The workspace of the file or item the connection sends data to"""
    last_run: NotRequired[ConnectionRunDtoTypedDict]
    last_run_by: NotRequired[str]
    r"""The ID of the user that last ran the connection"""
    last_run_date: NotRequired[datetime]
    r"""When the connection last ran, as a datetime"""
    last_run_destination_parameters: NotRequired[Dict[str, Any]]
    r"""A map of the parameters used with the destination when the connection last ran"""
    last_run_job_id: NotRequired[str]
    r"""The ID of the connection's last run"""
    last_run_source_parameters: NotRequired[Dict[str, Any]]
    r"""A map of the parameters used with the source when the connection last ran"""
    metadata: NotRequired[Dict[str, Any]]
    r"""Any additional information about the connection"""
    name: NotRequired[str]
    r"""The name of the connection, if specified"""
    source_id: NotRequired[str]
    r"""The ID of the file or item the connection pulls data from"""
    source_type: NotRequired[SourceType]
    r"""The type of file or item the connection pulls data from"""
    source_workspace_id: NotRequired[str]
    r"""The workspace of the file or item the connection pulls data from"""
    updated: NotRequired[datetime]
    r"""When the connection was updated, as a datetime."""
    workspace_id: NotRequired[str]
    r"""The workspace the connection belongs to"""


class ConnectionDto(BaseModel):
    connection_id: Annotated[Optional[str], pydantic.Field(alias="connectionId")] = None
    r"""The unique ID of the connection"""

    created: Optional[datetime] = None
    r"""When the connection was created, as a datetime"""

    created_by: Annotated[Optional[str], pydantic.Field(alias="createdBy")] = None
    r"""The ID of the user that created the connection"""

    description: Optional[str] = None
    r"""The description of the connection, if specified"""

    destination_id: Annotated[Optional[str], pydantic.Field(alias="destinationId")] = (
        None
    )
    r"""The ID of the file or item the connection sends data to"""

    destination_type: Annotated[
        Optional[DestinationType], pydantic.Field(alias="destinationType")
    ] = None
    r"""The type of file or item the connection sends data to"""

    destination_workspace_id: Annotated[
        Optional[str], pydantic.Field(alias="destinationWorkspaceId")
    ] = None
    r"""The workspace of the file or item the connection sends data to"""

    last_run: Annotated[Optional[ConnectionRunDto], pydantic.Field(alias="lastRun")] = (
        None
    )

    last_run_by: Annotated[Optional[str], pydantic.Field(alias="lastRunBy")] = None
    r"""The ID of the user that last ran the connection"""

    last_run_date: Annotated[
        Optional[datetime], pydantic.Field(alias="lastRunDate")
    ] = None
    r"""When the connection last ran, as a datetime"""

    last_run_destination_parameters: Annotated[
        Optional[Dict[str, Any]], pydantic.Field(alias="lastRunDestinationParameters")
    ] = None
    r"""A map of the parameters used with the destination when the connection last ran"""

    last_run_job_id: Annotated[Optional[str], pydantic.Field(alias="lastRunJobId")] = (
        None
    )
    r"""The ID of the connection's last run"""

    last_run_source_parameters: Annotated[
        Optional[Dict[str, Any]], pydantic.Field(alias="lastRunSourceParameters")
    ] = None
    r"""A map of the parameters used with the source when the connection last ran"""

    metadata: Optional[Dict[str, Any]] = None
    r"""Any additional information about the connection"""

    name: Optional[str] = None
    r"""The name of the connection, if specified"""

    source_id: Annotated[Optional[str], pydantic.Field(alias="sourceId")] = None
    r"""The ID of the file or item the connection pulls data from"""

    source_type: Annotated[Optional[SourceType], pydantic.Field(alias="sourceType")] = (
        None
    )
    r"""The type of file or item the connection pulls data from"""

    source_workspace_id: Annotated[
        Optional[str], pydantic.Field(alias="sourceWorkspaceId")
    ] = None
    r"""The workspace of the file or item the connection pulls data from"""

    updated: Optional[datetime] = None
    r"""When the connection was updated, as a datetime."""

    workspace_id: Annotated[Optional[str], pydantic.Field(alias="workspaceId")] = None
    r"""The workspace the connection belongs to"""

    @field_serializer("destination_type")
    def serialize_destination_type(self, value):
        if isinstance(value, str):
            try:
                return models.DestinationType(value)
            except ValueError:
                return value
        return value

    @field_serializer("source_type")
    def serialize_source_type(self, value):
        if isinstance(value, str):
            try:
                return models.SourceType(value)
            except ValueError:
                return value
        return value

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "connectionId",
                "created",
                "createdBy",
                "description",
                "destinationId",
                "destinationType",
                "destinationWorkspaceId",
                "lastRun",
                "lastRunBy",
                "lastRunDate",
                "lastRunDestinationParameters",
                "lastRunJobId",
                "lastRunSourceParameters",
                "metadata",
                "name",
                "sourceId",
                "sourceType",
                "sourceWorkspaceId",
                "updated",
                "workspaceId",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m


try:
    ConnectionDto.model_rebuild()
except NameError:
    pass
