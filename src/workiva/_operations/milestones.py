"""Platform API â€” milestones namespace.

Auto-generated by codegen. Do not edit manually.
"""

from __future__ import annotations

from typing import Any, Optional

import httpx

from workiva._constants import _API
from workiva._operations._base import BaseNamespace
from workiva.models.platform import (
    Milestone,
    MilestoneCreation,
)

__all__ = ["Milestones"]


class Milestones(BaseNamespace):
    """Milestones operations."""

    _api: _API = _API.PLATFORM

    def milestone_creation(
        self,
        *,
        body: MilestoneCreation,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Initiates a request to create a new milestone

        Create a new [`Milestone`](ref:milestones#milestone) using a
        [`MilestoneCreation`](ref:milestones#milestonecreation) request. This is
        a long running operation. Responses include a `Location` header, which
        indicates where to poll for results. For more details on long-running
        job polling, see [Operations endpoint](ref:getoperationbyid). When the
        creation completes, its status will be `completed`, and the response
        body includes a `resourceURL`. To GET the new milestone, perform a GET
        on the `resourceURL` with the same authentication credentials and flow
        as the initial request. For more details, see [Authentication
        documentation](ref:authentication).

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 500).

        Note:
            This is a long-running operation (HTTP 202). Use
            ``client.wait(response).result()`` to poll until completion.
        """
        return self._client.request(
            "POST",
            self._api,
            "/milestones/creation",
            json_body=body,
            timeout=timeout,
        )

    async def milestone_creation_async(
        self,
        *,
        body: MilestoneCreation,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Initiates a request to create a new milestone (async)

        Create a new [`Milestone`](ref:milestones#milestone) using a
        [`MilestoneCreation`](ref:milestones#milestonecreation) request. This is
        a long running operation. Responses include a `Location` header, which
        indicates where to poll for results. For more details on long-running
        job polling, see [Operations endpoint](ref:getoperationbyid). When the
        creation completes, its status will be `completed`, and the response
        body includes a `resourceURL`. To GET the new milestone, perform a GET
        on the `resourceURL` with the same authentication credentials and flow
        as the initial request. For more details, see [Authentication
        documentation](ref:authentication).

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 500).

        Note:
            This is a long-running operation (HTTP 202). Use
            ``await client.wait(response).result_async()`` to poll until completion.
        """
        return await self._client.request_async(
            "POST",
            self._api,
            "/milestones/creation",
            json_body=body,
            timeout=timeout,
        )

    def partially_update_milestone_by_id(
        self,
        *,
        milestone_id: str,
        body: list[Any],
        timeout: Optional[float] = None,
    ) -> Milestone:
        """Partially updates a milestone

        Partially updates a [`Milestone`](ref:milestones#milestone) with a given
        id.

        ### Options
        | Path                   | PATCH Operations Supported         | Value
        Type             |
        |------------------------|------------------------------------|---------
        ---------------|
        | `/title`               | `replace`                          | `string`
        |
        | `/remarks`             | `replace`                          |
        `string`, `null`       |

        Args:
            milestone_id: The unique identifier of a milestone.
            body: Request body.
            timeout: Override the default request timeout (seconds).

        Returns:
            Milestone

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 500).
        """
        response = self._client.request(
            "PATCH",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            json_body=body,
            timeout=timeout,
        )
        return Milestone.model_validate(response.json())

    async def partially_update_milestone_by_id_async(
        self,
        *,
        milestone_id: str,
        body: list[Any],
        timeout: Optional[float] = None,
    ) -> Milestone:
        """Partially updates a milestone (async)

        Partially updates a [`Milestone`](ref:milestones#milestone) with a given
        id.

        ### Options
        | Path                   | PATCH Operations Supported         | Value
        Type             |
        |------------------------|------------------------------------|---------
        ---------------|
        | `/title`               | `replace`                          | `string`
        |
        | `/remarks`             | `replace`                          |
        `string`, `null`       |

        Args:
            milestone_id: The unique identifier of a milestone.
            body: Request body.
            timeout: Override the default request timeout (seconds).

        Returns:
            Milestone

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 500).
        """
        response = await self._client.request_async(
            "PATCH",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            json_body=body,
            timeout=timeout,
        )
        return Milestone.model_validate(response.json())

    def get_milestone_by_id(
        self,
        *,
        milestone_id: str,
        timeout: Optional[float] = None,
    ) -> Milestone:
        """Retrieve a milestone by id

        Returns a [`Milestone`](ref:milestones#milestone) given its id

        Args:
            milestone_id: The unique identifier of a milestone.
            timeout: Override the default request timeout (seconds).

        Returns:
            Milestone

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = self._client.request(
            "GET",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            timeout=timeout,
        )
        return Milestone.model_validate(response.json())

    async def get_milestone_by_id_async(
        self,
        *,
        milestone_id: str,
        timeout: Optional[float] = None,
    ) -> Milestone:
        """Retrieve a milestone by id (async)

        Returns a [`Milestone`](ref:milestones#milestone) given its id

        Args:
            milestone_id: The unique identifier of a milestone.
            timeout: Override the default request timeout (seconds).

        Returns:
            Milestone

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = await self._client.request_async(
            "GET",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            timeout=timeout,
        )
        return Milestone.model_validate(response.json())

    def delete_milestone_by_id(
        self,
        *,
        milestone_id: str,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Deletes a milestone

        Deletes the [`Milestone`](ref:milestones#milestone) with a given id.

        Args:
            milestone_id: The unique identifier of a milestone.
            timeout: Override the default request timeout (seconds).

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 500).
        """
        return self._client.request(
            "DELETE",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            timeout=timeout,
        )

    async def delete_milestone_by_id_async(
        self,
        *,
        milestone_id: str,
        timeout: Optional[float] = None,
    ) -> httpx.Response:
        """Deletes a milestone (async)

        Deletes the [`Milestone`](ref:milestones#milestone) with a given id.

        Args:
            milestone_id: The unique identifier of a milestone.
            timeout: Override the default request timeout (seconds).

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 500).
        """
        return await self._client.request_async(
            "DELETE",
            self._api,
            "/milestones/{milestoneId}",
            path_params={
                "milestoneId": milestone_id,
            },
            timeout=timeout,
        )
