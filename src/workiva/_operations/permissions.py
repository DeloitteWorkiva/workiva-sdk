"""Platform API â€” permissions namespace.

Auto-generated by codegen. Do not edit manually.
"""

from __future__ import annotations

from typing import Any, Optional

import httpx

from workiva._constants import _API
from workiva._operations._base import BaseNamespace
from workiva.models.platform import (
    Permission,
    PermissionsListResult,
)

__all__ = ["Permissions"]


class Permissions(BaseNamespace):
    """Permissions operations."""

    _api: _API = _API.PLATFORM

    def get_permissions(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> PermissionsListResult:
        """Retrieve a list of all available permissions

        Returns a list of permissions.

        Returns:
            PermissionsListResult

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = self._client.request(
            "GET",
            self._api,
            "/permissions",
            timeout=timeout,
        )
        return PermissionsListResult.model_validate(response.json())

    async def get_permissions_async(
        self,
        *,
        timeout: Optional[float] = None,
    ) -> PermissionsListResult:
        """Retrieve a list of all available permissions (async)

        Returns a list of permissions.

        Returns:
            PermissionsListResult

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = await self._client.request_async(
            "GET",
            self._api,
            "/permissions",
            timeout=timeout,
        )
        return PermissionsListResult.model_validate(response.json())

    def get_permission_by_id(
        self,
        *,
        permission_id: str,
        timeout: Optional[float] = None,
    ) -> Permission:
        """Retrieve a single permission

        Retrieves a permission given its ID

        Args:
            permission_id: The unique identifier of the permission
            timeout: Override the default request timeout (seconds).

        Returns:
            Permission

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = self._client.request(
            "GET",
            self._api,
            "/permissions/{permissionId}",
            path_params={
                "permissionId": permission_id,
            },
            timeout=timeout,
        )
        return Permission.model_validate(response.json())

    async def get_permission_by_id_async(
        self,
        *,
        permission_id: str,
        timeout: Optional[float] = None,
    ) -> Permission:
        """Retrieve a single permission (async)

        Retrieves a permission given its ID

        Args:
            permission_id: The unique identifier of the permission
            timeout: Override the default request timeout (seconds).

        Returns:
            Permission

        Raises:
            WorkivaAPIError: On API errors (400, 401, 403, 404, 409, 429, 500, 503).
        """
        response = await self._client.request_async(
            "GET",
            self._api,
            "/permissions/{permissionId}",
            path_params={
                "permissionId": permission_id,
            },
            timeout=timeout,
        )
        return Permission.model_validate(response.json())
